/* =========================
   1) THEME & RESET
========================= */
:root{
  --bg:#f7e9ef; --bg-grad-a:#f7e9ef; --bg-grad-b:#f3eef6;
  --surface:#fff; --text:#1d1e20; --muted:#6b6f76;
  --accent:#e94f9b; --accent-2:#7a5af8; --accent-soft:#fde3ef;
  --line:#ececf2;
  --radius-lg:18px; --radius-md:14px; --radius-sm:10px;
  --shadow-1:0 8px 24px rgba(16,24,40,.06);
  --shadow-2:0 2px 10px rgba(16,24,40,.08);
  --transition:.18s ease;
}

html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  color:var(--text);
  background:
    radial-gradient(1200px 800px at 85% -10%, var(--bg-grad-b), transparent 60%),
    radial-gradient(900px 600px at -10% 20%, var(--bg-grad-b), transparent 55%),
    linear-gradient(180deg, var(--bg-grad-a), var(--bg-grad-b));
  display:flex;
}

/* === Page locked: no body scroll === */
html, body {
  height: 100%;
  overflow: hidden;       /* bloque le scroll global */
  margin: 0;
}

body {
  position: fixed;        /* empêche tout défilement de la page */
  inset: 0;               /* occupe tout l'écran */
  width: 100%;
  background-attachment: fixed;
}

/* Le conteneur global remplit l'écran */
.layout {
  height: 100vh;
  overflow: hidden;       /* pas de scroll ici non plus */
}

/* Le seul scroll autorisé est dans le contenu principal */
.main {
  height: 100vh;
  overflow-y: auto;       /* scroll interne */
  overflow-x: hidden;
  box-sizing: border-box;
  padding: 28px 32px 40px;
  margin-left: 248px;     /* garder si la sidebar est fixed à 248px */
}

/* Sidebar fixée toute hauteur (si ce n'est pas déjà le cas) */
.sidebar{
  position: fixed;
  top: 0; left: 0; bottom: 0;
  width: 248px;
  overflow-y: auto;       /* scroll interne si le menu est long */
}



/* Helpers simples */
.muted{ color:var(--muted); margin-top:.55rem; }
.hidden{ display:none; }

/* =========================
   2) LAYOUT
========================= */
.layout{ display:flex; width:100%; }

/* Sidebar fixed (plein height, sans gap bas) */
.sidebar{
  position:fixed; top:0; left:0; bottom:0; width:248px;
  display:flex; flex-direction:column; justify-content:space-between;
  padding:28px 18px 12px;
  background:#0f1115; color:#cfd3da;
  border-right:1px solid rgba(255,255,255,.06);
  overflow-y:auto; box-sizing:border-box;
}
.main{ flex:1; padding:28px 32px 40px; margin-left:248px; }

/* Header */
.main-header{
  display:flex; align-items:flex-end; justify-content:space-between; margin-bottom:22px;
}
.main-header h1{ margin:0; font-size:1.55rem; font-weight:800; letter-spacing:.2px;}
.subtitle{ color:var(--muted); font-size:.95rem; }

/* =========================
   3) COMPOSANTS GÉNÉRIQUES
========================= */

/* Logo + Nav + Logout (dans sidebar) */
.logo{ display:flex; align-items:center; gap:.65rem; font-weight:700; letter-spacing:.2px; color:#fff; }
.logo-symbol{
  width:34px; height:34px; border-radius:10px;
  background:linear-gradient(135deg, var(--accent), var(--accent-2));
  display:grid; place-items:center; color:#fff; font-weight:800;
  box-shadow:0 10px 22px rgba(233,79,155,.25);
}

.nav{ display:flex; flex-direction:column; gap:.5rem; margin-top:.25rem; }
.nav a{
  text-decoration:none; color:#cfd3da; padding:10px 12px; border-radius:12px;
  display:flex; align-items:center; gap:.6rem;
  transition:background var(--transition), color var(--transition), transform var(--transition);
}
.nav a:hover{ background:rgba(255,255,255,.06); color:#fff; transform:translateX(2px); }
.nav a[aria-current="page"], .nav a.active{
  background:linear-gradient(135deg, rgba(233,79,155,.22), rgba(122,90,248,.22));
  color:#fff; box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
}

.logout-btn{
  margin-top:auto; width:100%;
  background:rgba(255,255,255,.06);
  color:#fff; border:1px solid rgba(255,255,255,.12);
  padding:12px 14px; border-radius:12px; cursor:pointer; font-weight:700;
  transition: transform var(--transition), background var(--transition);
}
.logout-btn:hover{ background:rgba(255,255,255,.1); transform:translateY(-1px); }

/* Cards */
.card{
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-lg);
  padding:18px;
  box-shadow:var(--shadow-1);
}
.card h3{ margin:0 0 6px; font-size:.95rem; color:#3a3d45; font-weight:700; }
.card p{ margin:.25rem 0 0; font-size:1.6rem; font-weight:800; letter-spacing:.2px; }
.card--elev{
  background:
    linear-gradient(180deg,#fff,#fff),
    radial-gradient(700px 280px at 80% -30%, rgba(233,79,155,.18), transparent 60%),
    radial-gradient(600px 260px at -10% 140%, rgba(122,90,248,.18), transparent 60%);
  background-blend-mode:normal,screen,screen;
  border:1px solid rgba(233,79,155,.15);
  box-shadow:0 20px 40px rgba(122,90,248,.08), var(--shadow-1);
}

/* Grilles */
.stats{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:16px; margin-bottom:22px; }
.cards-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:16px; }

/* Boutons */
.btn{
  border:1px solid var(--line); background:#fff;
  padding:.75rem 1rem; border-radius:12px; cursor:pointer; font-weight:700;
  transition: transform var(--transition), box-shadow var(--transition), background var(--transition);
}
.btn:hover{ transform:translateY(-1px); box-shadow:var(--shadow-2); }
.btn-danger{ border-color:#ffd2dc; background:#ffe8ef; color:#b21e49; }
.btn-danger:hover{ background:#ffe1ea; }

/* Table */
.table-wrap{ width:100%; overflow-x:auto; }
.table{
  width:100%; border-collapse:collapse; min-width:760px; background:var(--surface);
  border:1px solid var(--line); border-radius:var(--radius-lg); overflow:hidden;
  box-shadow:var(--shadow-2);
}
.table thead th{
  background:#fafafb; font-weight:700; font-size:.92rem; color:#444;
  border-bottom:1px solid var(--line);
}
.table th,.table td{ padding:12px 14px; text-align:left; border-bottom:1px solid var(--line); }
.table tr:hover td{ background:#fcfbfe; }
.table td .row-actions{ display:flex; gap:.5rem; }

/* Form générique */
.form-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px; }
.form-field{ display:flex; flex-direction:column; gap:8px; }
.form-label{ font-size:.7rem; color:#545861; }
.form-field--wide{ grid-column:1 / -1; }
.form-actions{ grid-column:1 / -1; display:flex; justify-content:flex-end; margin-top:.25rem; }
.form-field input:focus, .form-field select:focus, .form-field textarea:focus{
  outline:none; border-color:rgba(122,90,248,.45); box-shadow:0 0 0 4px rgba(122,90,248,.14);
}

/* =========================
   4) COMPOSANTS SPÉCIFIQUES
========================= */

/* Auth */
.auth-container{ max-width:440px; margin:5rem auto; padding:24px; }
.auth-container form{ display:grid; gap:14px; }
.auth-container label{ display:grid; gap:6px; }
.auth-container input, .auth-container select, .auth-container textarea, .auth-container button{
  padding:12px 14px; border-radius:12px; border:1px solid var(--line); background:#fff; font:inherit;
  transition: box-shadow var(--transition), border-color var(--transition);
}
.switch-form{ font-size:.93rem; color:var(--muted); }
.error{ color:#b00020; font-size:.92rem; }
.success{ color:#0a7f3f; font-size:.92rem; }
#login-view,#register-view{ width:400px; height:400px; }

/* Categories */
.cat-form{ display:grid; grid-template-columns:1fr 180px auto; gap:.6rem; margin-bottom:.8rem; }
.cat-input,.cat-select{ border:1px solid var(--line); border-radius:12px; padding:.6rem .7rem; background:#fff; }
.cat-list{ list-style:none; padding:0; margin:0; }
.cat-list li{
  display:flex; align-items:center; justify-content:space-between; gap:.75rem;
  border:1px solid var(--line); border-radius:14px; padding:.6rem .75rem; background:#fff; margin-bottom:.5rem;
  box-shadow:var(--shadow-2);
}
.cat-name{ display:flex; align-items:center; gap:.5rem; }
.badge{ font-size:.78rem; padding:.18rem .5rem; border-radius:999px; border:1px solid var(--line); background:var(--accent-soft); }
.badge-income{ color:#0a7; border-color:#bfe9d7; background:#e9fbf5; }
.badge-expense{ color:#c33; border-color:#ffd2dc; background:#ffeaf1; }

/* Scroll list inside default categories card */
#default-cats{ max-height:calc(100vh - 260px); overflow-y:auto; padding-right:6px; }
#default-cats::-webkit-scrollbar{ width:8px; }
#default-cats::-webkit-scrollbar-track{ background:transparent; }
#default-cats::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.12); border-radius:999px; }
#default-cats:hover::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.22); }

/* Transactions – Form dans card (override ciblé) */
.card #tx-form.form-grid{ margin:4px 0; }
.card #tx-form .form-label{ font-size:.9rem; color:var(--muted); font-weight:600; }
.card #tx-form input, .card #tx-form select{
  width:100%; appearance:none; border:1px solid var(--line); background:#fff; border-radius:12px; padding:12px 14px; font:inherit;
  color:var(--text); transition:border-color .18s ease, box-shadow .18s ease, background .18s ease;
}
.card #tx-form select{
  background-image:
    linear-gradient(45deg, transparent 50%, var(--muted) 50%),
    linear-gradient(135deg, var(--muted) 50%, transparent 50%);
  background-position: calc(100% - 18px) calc(50% - 3px), calc(100% - 12px) calc(50% - 3px);
  background-size:6px 6px, 6px 6px; background-repeat:no-repeat; padding-right:40px;
}
.card #tx-form input:focus, .card #tx-form select:focus{
  outline:none; border-color:rgba(122,90,248,.45); box-shadow:0 0 0 4px rgba(122,90,248,.14);
}
.card #tx-form .btn{
  border:1px solid var(--line);
  background:linear-gradient(135deg, var(--accent), var(--accent-2));
  color:#fff; padding:.8rem 1.2rem; border-radius:12px; font-weight:700; cursor:pointer;
  transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
  box-shadow:0 8px 20px rgba(122,90,248,.18);
}
.card #tx-form .btn:hover{ transform:translateY(-1px); box-shadow:0 12px 28px rgba(122,90,248,.22); filter:brightness(1.02); }
.card #tx-form .form-field--wide{ grid-column:1 / -1; }
.card #tx-form .form-actions{ grid-column:1 / -1; display:flex; justify-content:flex-end; margin-top:2px; }
/* Inputs number & date */
.card #tx-form input[type="number"]::-webkit-outer-spin-button,
.card #tx-form input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
.card #tx-form input[type="number"]{ -moz-appearance:textfield; }
.card #tx-form input[type="date"]{ color-scheme:light; }

/* Transactions – Grille des 4 premiers champs (version unifiée) */
#tx-form.form-grid{
  display:grid; grid-template-columns:repeat(4, 1fr);
  gap:14px; align-items:end; margin-bottom:1.6rem;
}
#tx-form .form-field{ min-width:0; }
#tx-form select[name="type"],
#tx-form input[name="amount"],
#tx-form input[name="date"],
#tx-form select[name="category"]{ width:100%; }
#tx-form input[name="note"]{ max-width:400px; }

/* Espace entre deux cards successives */
.card + .card{ margin-top:1.6rem; }

/* Transactions – Bouton supprimer (ligne) */
.icon-btn.delete-btn, .btn-delete, .row-actions .btn-delete{
  border:1px solid #ffd2dc; background:#ffe8ef; color:#b21e49;
  border-radius:10px; padding:.4rem .7rem; font-size:.9rem; cursor:pointer; font-weight:600;
  transition: background .18s ease, box-shadow .18s ease, transform .18s ease;
}
.icon-btn.delete-btn:hover, .btn-delete:hover, .row-actions .btn-delete:hover{
  background:#ffe1ea; box-shadow:0 4px 10px rgba(178,30,73,.15); transform:translateY(-1px);
}
.icon-btn.delete-btn:active, .btn-delete:active, .row-actions .btn-delete:active{
  background:#ffd6df; transform:translateY(0);
}
.icon-btn.delete-btn i{ font-size:1rem; vertical-align:middle; color:#b21e49; }

/* Transactions – Card scrollable avec header sticky */
.card.transactions-card{
  display:flex; flex-direction:column; height:500px; max-height:70vh; overflow:hidden;
}
.transactions-card h3{ margin-bottom:10px; flex-shrink:0; }
.transactions-card .table-wrap{
  flex:1; overflow-y:auto; border:1px solid var(--line); border-radius:var(--radius-md); box-shadow:var(--shadow-2);
}
.transactions-card .table-wrap::-webkit-scrollbar{ width:8px; }
.transactions-card .table-wrap::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.15); border-radius:999px; }
.transactions-card .table-wrap::-webkit-scrollbar-thumb:hover{ background:rgba(0,0,0,.3); }
.transactions-card table{ width:100%; border-collapse:collapse; }
.transactions-card th, .transactions-card td{ padding:12px 14px; text-align:left; border-bottom:1px solid var(--line); }
.transactions-card tr:hover td{ background:#fcfbfe; }
.transactions-card thead th{ position:sticky; top:0; background:#fafafb; z-index:2; }

/* Dashboard – Dernières transactions (liste) */
.transactions{ margin-top:2rem; }
.transactions h3{ margin-bottom:.8rem; font-size:1rem; font-weight:800; color:#3a3d45; }
.transactions-list{
  background:var(--surface); border:1px solid var(--line); border-radius:var(--radius-lg);
  padding:16px 18px; box-shadow:var(--shadow-2);
  min-height:100px; display:flex; flex-direction:column; gap:.6rem; overflow-y:auto;
}
.transactions-list::-webkit-scrollbar{ width:8px; }
.transactions-list::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.12); border-radius:999px; }
.transactions-list:hover::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.25); }
.transactions-list .tx-item{
  display:flex; justify-content:space-between; align-items:center;
  padding:.65rem .85rem; background:#fff; border-radius:12px; border:1px solid var(--line);
  box-shadow:var(--shadow-1); transition: transform .15s ease, box-shadow .15s ease;
}
.transactions-list .tx-item:hover{ transform:translateY(-1px); box-shadow:0 6px 20px rgba(122,90,248,.1); }
.tx-item .tx-info{ display:flex; flex-direction:column; gap:2px; }
.tx-item .tx-info .tx-category{ font-weight:600; color:var(--text); }
.tx-item .tx-info .tx-date{ font-size:.85rem; color:var(--muted); }
.tx-item .tx-amount{ font-weight:800; font-size:1rem; }
.tx-item.income .tx-amount{ color:#119c6b; }
.tx-item.expense .tx-amount{ color:#d64545; }
.transactions-list p{ text-align:center; color:var(--muted); font-size:.95rem; margin:1rem 0; }

/* Settings cards + profile form */
.main .cards-grid{ grid-template-columns:repeat(auto-fit,minmax(320px,1fr)); gap:18px; }
.main .card{ background:var(--surface); border:1px solid var(--line); border-radius:var(--radius-lg); padding:18px 18px 16px; box-shadow:var(--shadow-1); }
.main .card h3{ margin:0 0 12px; font-size:1rem; font-weight:800; color:#3a3d45; }
#profile-form.form-grid{ grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px; margin-top:6px; }
#profile-form .form-field{ display:flex; flex-direction:column; gap:8px; }
#profile-form .form-label{ font-size:.9rem; color:var(--muted); font-weight:600; }
#profile-form input, #profile-form select{
  width:100%; appearance:none; border:1px solid var(--line); background:#fff; border-radius:12px; padding:12px 14px; font:inherit; color:var(--text);
  transition:border-color .18s ease, box-shadow .18s ease, background .18s ease;
}
#profile-form select{
  background-image:
    linear-gradient(45deg, transparent 50%, var(--muted) 50%),
    linear-gradient(135deg, var(--muted) 50%, transparent 50%);
  background-position: calc(100% - 18px) calc(50% - 3px), calc(100% - 12px) calc(50% - 3px);
  background-size:6px 6px, 6px 6px; background-repeat:no-repeat; padding-right:40px;
}
#profile-form input:focus, #profile-form select:focus{ outline:none; border-color:rgba(122,90,248,.45); box-shadow:0 0 0 4px rgba(122,90,248,.14); }
#profile-form .form-actions{ grid-column:1 / -1; display:flex; justify-content:flex-end; margin-top:2px; }
#profile-form .btn{
  border:1px solid var(--line);
  background:linear-gradient(135deg, var(--accent), var(--accent-2));
  color:#fff; padding:.8rem 1.2rem; border-radius:12px; font-weight:700; cursor:pointer;
  transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
  box-shadow:0 8px 20px rgba(122,90,248,.18);
}
#profile-form .btn:hover{ transform:translateY(-1px); box-shadow:0 12px 28px rgba(122,90,248,.22); filter:brightness(1.02); }
#profile-message,#reset-message{ color:var(--muted); }
#reset-btn.btn{ border-color:#ffd2dc; background:#ffe8ef; color:#b21e49; font-weight:800; border-radius:12px; transition: transform .18s ease, box-shadow .18s ease, background .18s ease; }
#reset-btn.btn:hover{ background:#ffe1ea; transform:translateY(-1px); box-shadow:0 10px 22px rgba(178,30,73,.12); }

/* Mini bars (optionnel) */
.mini-bars{ height:54px; display:flex; align-items:flex-end; gap:6px; }
.mini-bars span{
  display:block; width:6px; border-radius:6px;
  background:linear-gradient(180deg, var(--accent-2), var(--accent));
  box-shadow:0 6px 14px rgba(122,90,248,.25);
}

/* Limit only the Name input width in Settings */
#profile-form input#profile-name {
  max-width: 220px;          /* réduit la largeur du champ */
  width: 100%;               /* garde la réactivité */
  box-sizing: border-box;
}

/* Compact Amount, Date, and Category fields */
#tx-form input[name="amount"] {
  max-width: 160px;
}

#tx-form input[name="date"] {
  max-width: 180px;
}

#tx-form select[name="category"] {
  max-width: 200px;
}

/* Ensure they stay aligned nicely */
#tx-form .form-field {
  min-width: 0;
}





/* =========================
   5) RESPONSIVE (tout à la fin)
========================= */
@media (max-width:560px){
  .main .cards-grid{ grid-template-columns:1fr; }
  #profile-form.form-grid{ grid-template-columns:1fr; }
}
@media (max-width:640px){
  #tx-form.form-grid{ grid-template-columns:1fr; }
  #tx-form input[name="note"]{ max-width:100%; }
  .card.transactions-card{ height:auto; max-height:none; }
}
@media (max-width:520px){
  .card #tx-form.form-grid{ grid-template-columns:1fr; }
}
@media (max-width: 640px) {
  #profile-form input#profile-name {
    max-width: 100%;         /* pleine largeur sur mobile */
  }
}
/* On small screens, go full width again */
@media (max-width: 640px) {
  #tx-form input[name="amount"],
  #tx-form input[name="date"],
  #tx-form select[name="category"] {
    max-width: 100%;
  }
}